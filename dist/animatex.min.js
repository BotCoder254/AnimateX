!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).AnimateX=t()}(this,(function(){"use strict";class e{constructor(e={}){this.options={threshold:.1,rootMargin:"20px",duration:300,easing:"ease",debug:!1,...e},this.observers=new Map,this.initialized=!1,this.init()}init(){if(!this.initialized)try{this.setupAnimationObserver(),this.setupHoverAnimations(),this.setupClickAnimations(),this.setupSequenceAnimations(),this.setupParallaxEffects(),this.setupStateAnimations(),this.initialized=!0,this.dispatchEvent("anx:initialized")}catch(e){this.handleError("Initialization failed",e)}}setupAnimationObserver(){const e=new IntersectionObserver((t=>{t.forEach((t=>{if(t.isIntersecting){const n=t.target;this.applyAnimation(n,"anx-animate"),e.unobserve(n)}}))}),{threshold:this.options.threshold,rootMargin:this.options.rootMargin});this.observers.set("animation",e),this.observeElements("[anx-animate]",e)}setupHoverAnimations(){document.querySelectorAll("[anx-hover]").forEach((e=>{const t=e.getAttribute("anx-hover");if(!t)return;const n=t.split(" "),i=()=>{requestAnimationFrame((()=>{n.forEach((t=>{e.classList.add(`anx-${t}`)})),this.dispatchEvent("anx:hover:start",{element:e,animations:n})}))},s=()=>{requestAnimationFrame((()=>{n.forEach((t=>{e.classList.remove(`anx-${t}`)})),this.dispatchEvent("anx:hover:end",{element:e,animations:n})}))};e.addEventListener("mouseenter",i),e.addEventListener("mouseleave",s),e._anxCleanup=()=>{e.removeEventListener("mouseenter",i),e.removeEventListener("mouseleave",s)}}))}setupClickAnimations(){document.querySelectorAll("[anx-click]").forEach((e=>{const t=e.getAttribute("anx-click");if(!t)return;const n=()=>{const n=t.split(" ");requestAnimationFrame((()=>{n.forEach((t=>{const n=`anx-${t}`;e.classList.add(n),this.dispatchEvent("anx:click:start",{element:e,animation:t});const i=parseInt(getComputedStyle(e).animationDuration)||this.options.duration;setTimeout((()=>{e.classList.remove(n),this.dispatchEvent("anx:click:end",{element:e,animation:t})}),i)}))}))};e.addEventListener("click",n),e._anxCleanup=()=>{e.removeEventListener("click",n)}}))}setupSequenceAnimations(){document.querySelectorAll("[anx-sequence]").forEach((e=>{const t=Array.from(e.children),n=parseInt(e.getAttribute("anx-sequence-delay")||100),i=e.getAttribute("anx-sequence-stagger");t.forEach(((e,t)=>{let s;s="random"===i?1e3*Math.random():n*t,e.style.setProperty("--anx-delay",`${s}ms`),this.dispatchEvent("anx:sequence:item",{element:e,delay:s,index:t})})),this.dispatchEvent("anx:sequence:ready",{element:e,itemCount:t.length})}))}setupParallaxEffects(){const e=document.querySelectorAll("[anx-parallax]");if(!e.length)return;let t=!1;const n=()=>{e.forEach((e=>{if(!e.isConnected)return;const t=parseFloat(e.getAttribute("anx-parallax")||.5),n=e.getBoundingClientRect(),i=window.pageYOffset,s=(i-(n.top+i-window.innerHeight/2))*t;requestAnimationFrame((()=>{e.style.transform=`translate3d(0, ${s}px, 0)`}))})),t=!1};window.addEventListener("scroll",(()=>{t||(t=!0,requestAnimationFrame(n))}),{passive:!0})}setupStateAnimations(){document.querySelectorAll("[anx-state]").forEach((e=>{e.getAttribute("anx-state").split(" ").forEach((t=>{const[n,i]=t.split(":");if(!n||!i)return;const s=()=>e.classList.add(`anx-${i}`),a=()=>e.classList.remove(`anx-${i}`);switch(n){case"focus":e.addEventListener("focus",s),e.addEventListener("blur",a);break;case"active":e.addEventListener("mousedown",s),e.addEventListener("mouseup",a),e.addEventListener("mouseleave",a);break;case"visible":this.createVisibilityObserver(e,i)}}))}))}createVisibilityObserver(e,t){const n=new IntersectionObserver((n=>{n.forEach((n=>{const i=`anx-${t}`;n.isIntersecting?e.classList.add(i):e.classList.remove(i)}))}),this.options);return n.observe(e),n}applyAnimation(e,t){const n=e.getAttribute(t);if(!n)return;n.split(" ").forEach((t=>{requestAnimationFrame((()=>{e.classList.add("anx-animated",`anx-${t}`),this.dispatchEvent("anx:animate:start",{element:e,animation:t}),e.addEventListener("animationend",(()=>{this.dispatchEvent("anx:animate:end",{element:e,animation:t})}),{once:!0})}))}))}observeElements(e,t){document.querySelectorAll(e).forEach((e=>{t.observe(e)}))}dispatchEvent(e,t={}){const n=new CustomEvent(e,{detail:{...t,instance:this}});document.dispatchEvent(n),this.options.debug&&console.log(`AnimateX Event: ${e}`,t)}handleError(e,t){const n=new CustomEvent("anx:error",{detail:{message:e,error:t,instance:this}});document.dispatchEvent(n),this.options.debug&&console.error(`AnimateX Error: ${e}`,t)}destroy(){this.observers.forEach((e=>e.disconnect())),this.observers.clear(),document.querySelectorAll("[anx-hover], [anx-click]").forEach((e=>{e._anxCleanup&&(e._anxCleanup(),delete e._anxCleanup)})),this.initialized=!1,this.dispatchEvent("anx:destroyed")}static init(t={}){return new e(t)}}return"undefined"!=typeof window&&window.addEventListener("DOMContentLoaded",(()=>{window.AnimateX=e.init()})),e}));
//# sourceMappingURL=animatex.min.js.map
