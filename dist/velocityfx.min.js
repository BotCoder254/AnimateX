!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).VelocityFX=t()}(this,(function(){"use strict";class e{constructor(e={}){this.options={threshold:.1,rootMargin:"20px",duration:300,easing:"ease",debug:!1,...e},this.observers=new Map,this.initialized=!1,this.init()}init(){if(!this.initialized)try{this.setupAnimationObserver(),this.setupHoverAnimations(),this.setupClickAnimations(),this.setupSequenceAnimations(),this.setupParallaxEffects(),this.setupStateAnimations(),this.initialized=!0,this.dispatchEvent("vfx:initialized")}catch(e){this.handleError("Initialization failed",e)}}setupAnimationObserver(){const e=new IntersectionObserver((t=>{t.forEach((t=>{if(t.isIntersecting){const i=t.target;this.applyAnimation(i,"vfx-animate"),e.unobserve(i)}}))}),{threshold:this.options.threshold,rootMargin:this.options.rootMargin});this.observers.set("animation",e),this.observeElements("[vfx-animate]",e)}setupHoverAnimations(){document.querySelectorAll("[vfx-hover]").forEach((e=>{const t=e.getAttribute("vfx-hover");if(!t)return;const i=t.split(" "),n=()=>{requestAnimationFrame((()=>{i.forEach((t=>{e.classList.add(`vfx-${t}`)})),this.dispatchEvent("vfx:hover:start",{element:e,animations:i})}))},s=()=>{requestAnimationFrame((()=>{i.forEach((t=>{e.classList.remove(`vfx-${t}`)})),this.dispatchEvent("vfx:hover:end",{element:e,animations:i})}))};e.addEventListener("mouseenter",n),e.addEventListener("mouseleave",s),e._vfxCleanup=()=>{e.removeEventListener("mouseenter",n),e.removeEventListener("mouseleave",s)}}))}setupClickAnimations(){document.querySelectorAll("[vfx-click]").forEach((e=>{const t=e.getAttribute("vfx-click");if(!t)return;const i=()=>{const i=t.split(" ");requestAnimationFrame((()=>{i.forEach((t=>{const i=`vfx-${t}`;e.classList.add(i),this.dispatchEvent("vfx:click:start",{element:e,animation:t});const n=parseInt(getComputedStyle(e).animationDuration)||this.options.duration;setTimeout((()=>{e.classList.remove(i),this.dispatchEvent("vfx:click:end",{element:e,animation:t})}),n)}))}))};e.addEventListener("click",i),e._vfxCleanup=()=>{e.removeEventListener("click",i)}}))}setupSequenceAnimations(){document.querySelectorAll("[vfx-sequence]").forEach((e=>{const t=Array.from(e.children),i=parseInt(e.getAttribute("vfx-sequence-delay")||100),n=e.getAttribute("vfx-sequence-stagger");t.forEach(((e,t)=>{let s;s="random"===n?1e3*Math.random():i*t,e.style.setProperty("--vfx-delay",`${s}ms`),this.dispatchEvent("vfx:sequence:item",{element:e,delay:s,index:t})})),this.dispatchEvent("vfx:sequence:ready",{element:e,itemCount:t.length})}))}setupParallaxEffects(){const e=document.querySelectorAll("[vfx-parallax]");if(!e.length)return;let t=!1;const i=()=>{e.forEach((e=>{if(!e.isConnected)return;const t=parseFloat(e.getAttribute("vfx-parallax")||.5),i=e.getBoundingClientRect(),n=window.pageYOffset,s=(n-(i.top+n-window.innerHeight/2))*t;requestAnimationFrame((()=>{e.style.transform=`translate3d(0, ${s}px, 0)`}))})),t=!1};window.addEventListener("scroll",(()=>{t||(t=!0,requestAnimationFrame(i))}),{passive:!0})}setupStateAnimations(){document.querySelectorAll("[vfx-state]").forEach((e=>{e.getAttribute("vfx-state").split(" ").forEach((t=>{const[i,n]=t.split(":");if(!i||!n)return;const s=()=>e.classList.add(`vfx-${n}`),o=()=>e.classList.remove(`vfx-${n}`);switch(i){case"focus":e.addEventListener("focus",s),e.addEventListener("blur",o);break;case"active":e.addEventListener("mousedown",s),e.addEventListener("mouseup",o),e.addEventListener("mouseleave",o);break;case"visible":this.createVisibilityObserver(e,n)}}))}))}createVisibilityObserver(e,t){const i=new IntersectionObserver((i=>{i.forEach((i=>{const n=`vfx-${t}`;i.isIntersecting?e.classList.add(n):e.classList.remove(n)}))}),this.options);return i.observe(e),i}applyAnimation(e,t){const i=e.getAttribute(t);if(!i)return;i.split(" ").forEach((t=>{requestAnimationFrame((()=>{e.classList.add("vfx-animated",`vfx-${t}`),this.dispatchEvent("vfx:animate:start",{element:e,animation:t}),e.addEventListener("animationend",(()=>{this.dispatchEvent("vfx:animate:end",{element:e,animation:t})}),{once:!0})}))}))}observeElements(e,t){document.querySelectorAll(e).forEach((e=>{t.observe(e)}))}dispatchEvent(e,t={}){const i=new CustomEvent(e,{detail:{...t,instance:this}});document.dispatchEvent(i),this.options.debug&&console.log(`VelocityFX Event: ${e}`,t)}handleError(e,t){const i=new CustomEvent("vfx:error",{detail:{message:e,error:t,instance:this}});document.dispatchEvent(i),this.options.debug&&console.error(`VelocityFX Error: ${e}`,t)}destroy(){this.observers.forEach((e=>e.disconnect())),this.observers.clear(),document.querySelectorAll("[vfx-hover], [vfx-click]").forEach((e=>{e._vfxCleanup&&(e._vfxCleanup(),delete e._vfxCleanup)})),this.initialized=!1,this.dispatchEvent("vfx:destroyed")}static init(t={}){return new e(t)}}return"undefined"!=typeof window&&window.addEventListener("DOMContentLoaded",(()=>{window.VelocityFX=e.init()})),e}));
//# sourceMappingURL=velocityfx.min.js.map
